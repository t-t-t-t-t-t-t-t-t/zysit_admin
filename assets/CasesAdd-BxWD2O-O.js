import{u as w}from"./CasesHooks-BIjiRMKC.js";import{u as F}from"./CasesCategoryHooks-BpW0SQje.js";import{u as I,r as i,e as f,j as R,f as r,o as d,g as _,w as a,a as l,c as B,F as L,l as D,h as c,t as H}from"./index-DDjioiAb.js";import{U as b}from"./UploadImage-COppiFFJ.js";import{_ as N}from"./Editor-DMv65aeN.js";const T={__name:"CasesAdd",setup($){const y=I(),m=i(""),u=i(),o=f({title:"",detail:"",image:"",category:null,content:""}),p=i([]);R(()=>[F().getCasesCategoryList().then(n=>[p.value=n])]);const v=f({detail:[{required:!0,message:"请输入描述",trigger:"blur"}],image:[{required:!0,message:"请选择图片",trigger:"blur"}],title:[{required:!0,message:"请输入标题",trigger:"blur"}],content:[{required:!0,message:"请输入标题",trigger:"blur"}],category:[{required:!0,message:"请选择类别",trigger:"blur"}]}),C=()=>{u.value.validate().then(n=>{n&&w().addCases(o).then(e=>{y.push("/cases-manage/casesList"),u.value&&u.value.resetFields()})}).catch(n=>{console.log(n)})};return(n,e)=>{const g=r("el-input"),s=r("el-form-item"),V=r("el-option"),k=r("el-select"),x=r("el-text"),U=r("el-button"),q=r("el-form");return d(),_(q,{model:o,ref_key:"formRef",ref:u,"label-width":"auto",rules:v},{default:a(()=>[l(s,{label:"标题",prop:"title"},{default:a(()=>[l(g,{style:{width:"280px"},modelValue:o.title,"onUpdate:modelValue":e[0]||(e[0]=t=>o.title=t)},null,8,["modelValue"])]),_:1}),l(s,{label:"类别",prop:"category"},{default:a(()=>[l(k,{modelValue:o.category,"onUpdate:modelValue":e[1]||(e[1]=t=>o.category=t)},{default:a(()=>[(d(!0),B(L,null,D(p.value,t=>(d(),_(V,{key:t._id,label:t.title,value:t.title},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(s,{label:"描述",prop:"detail"},{default:a(()=>[l(g,{style:{width:"280px"},modelValue:o.detail,"onUpdate:modelValue":e[2]||(e[2]=t=>o.detail=t)},null,8,["modelValue"])]),_:1}),l(s,{label:"封面图片",prop:"image"},{default:a(()=>[l(b,{image:o.image,onUploadImage:e[3]||(e[3]=t=>{o.image=t})},null,8,["image"])]),_:1}),l(s,{label:"上传图片"},{default:a(()=>[l(b,{image:m.value,onUploadImage:e[4]||(e[4]=t=>{m.value=t})},null,8,["image"]),l(x,null,{default:a(()=>[c(H(m.value),1)]),_:1})]),_:1}),l(s,{label:"正文",prop:"content"},{default:a(()=>[l(N,{onChangeContent:e[5]||(e[5]=t=>{o.content=t}),content:o.content},null,8,["content"])]),_:1}),l(U,{type:"primary",onClick:e[6]||(e[6]=t=>C())},{default:a(()=>e[7]||(e[7]=[c(" 确认添加 ")])),_:1})]),_:1},8,["model","rules"])}}};export{T as default};
