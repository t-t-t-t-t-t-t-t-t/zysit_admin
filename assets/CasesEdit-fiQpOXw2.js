import{u as _}from"./CasesHooks-BIjiRMKC.js";import{u as F}from"./CasesCategoryHooks-BpW0SQje.js";import{u as I,m as L,e as c,r as d,j as B,f as s,o as m,g as p,w as a,a as o,c as N,F as j,l as D,h as b,t as E,n as H}from"./index-DDjioiAb.js";import{U as y}from"./UploadImage-COppiFFJ.js";import{_ as $}from"./Editor-DMv65aeN.js";const G={__name:"CasesEdit",setup(M){const C=I(),v=L(),l=c({}),u=d(),i=d(""),V=c({detail:[{required:!0,message:"请输入描述",trigger:"blur"}],image:[{required:!0,message:"请选择图片",trigger:"blur"}],title:[{required:!0,message:"请输入标题",trigger:"blur"}],content:[{required:!0,message:"请输入标题",trigger:"blur"}],category:[{required:!0,message:"请选择类别",trigger:"blur"}]}),g=d([]);B(()=>{_().getCasesList(v.query._id).then(r=>{Object.assign(l,r[0])}),F().getCasesCategoryList().then(r=>[g.value=r])});const k=()=>{u.value.validate().then(r=>{r&&_().putCases(l).then(e=>{C.push("/cases-manage/casesList"),u.value&&u.value.resetFields()})}).catch(r=>{console.log(r)})};return(r,e)=>{const f=s("el-input"),n=s("el-form-item"),x=s("el-option"),U=s("el-select"),q=s("el-text"),w=s("el-button"),R=s("el-form");return m(),p(R,{model:l,ref_key:"formRed",ref:u,"label-width":"auto",rules:V},{default:a(()=>[o(n,{label:"标题",prop:"title"},{default:a(()=>[o(f,{style:{width:"280px"},modelValue:l.title,"onUpdate:modelValue":e[0]||(e[0]=t=>l.title=t)},null,8,["modelValue"])]),_:1}),o(n,{label:"类别",prop:"category"},{default:a(()=>[o(U,{modelValue:l.category,"onUpdate:modelValue":e[1]||(e[1]=t=>l.category=t)},{default:a(()=>[(m(!0),N(j,null,D(g.value,t=>(m(),p(x,{key:t._id,label:t.title,value:t.title},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(n,{label:"描述",prop:"detail"},{default:a(()=>[o(f,{style:{width:"280px"},modelValue:l.detail,"onUpdate:modelValue":e[2]||(e[2]=t=>l.detail=t)},null,8,["modelValue"])]),_:1}),o(n,{label:"封面图片",prop:"image"},{default:a(()=>[o(y,{image:l.image,onUploadImage:e[3]||(e[3]=t=>{l.image=t})},null,8,["image"])]),_:1}),o(n,{label:"上传图片"},{default:a(()=>[o(y,{image:i.value,onUploadImage:e[4]||(e[4]=t=>{i.value=t})},null,8,["image"]),o(q,null,{default:a(()=>[b(E(i.value),1)]),_:1})]),_:1}),o(n,{label:"正文",prop:"content"},{default:a(()=>[l.content?(m(),p($,{key:0,onChangeContent:e[5]||(e[5]=t=>{l.content=t}),content:l.content},null,8,["content"])):H("",!0)]),_:1}),o(w,{type:"primary",onClick:e[6]||(e[6]=t=>k())},{default:a(()=>e[7]||(e[7]=[b(" 确认编辑 ")])),_:1})]),_:1},8,["model","rules"])}}};export{G as default};
