import{u as b}from"./CasesCategoryHooks-BpW0SQje.js";import{r as x,e as D,f as s,o as k,g as B,w as l,a as o,h as _,i as $,j as E,c as R,k as c}from"./index-DDjioiAb.js";const h={__name:"CasesCategoryAdd",props:["isShowDialog"],emits:["addCasesCategory","closeBox"],setup(r,{emit:d}){const m=d,i=x(),f=D({title:""}),g=D({title:[{required:!0,message:"请输入标题",trigger:"blur"}]}),p=()=>{i.value.validate().then(t=>{t&&b().addCasesCategory(f).then(a=>{m("addCasesCategory",{_id:a._id,title:a.title}),m("closeBox"),i.value&&i.value.resetFields()})}).catch(t=>{console.log(t)})};return(t,a)=>{const n=s("el-input"),e=s("el-form-item"),u=s("el-button"),y=s("el-form"),v=s("el-dialog");return k(),B(v,{"model-value":r.isShowDialog,onSubmit:a[2]||(a[2]=$(()=>{},["prevent"])),title:"添加应用案例类别",width:"500",onClose:a[3]||(a[3]=w=>m("closeBox"))},{default:l(()=>[o(y,{model:f,ref_key:"formRed",ref:i,"label-width":"auto",rules:g,style:{"max-width":"600px"}},{default:l(()=>[o(e,{label:"标题",prop:"title"},{default:l(()=>[o(n,{style:{width:"280px"},modelValue:f.title,"onUpdate:modelValue":a[0]||(a[0]=w=>f.title=w)},null,8,["modelValue"])]),_:1}),o(u,{type:"primary",onClick:a[1]||(a[1]=w=>p())},{default:l(()=>a[4]||(a[4]=[_(" 确认添加 ")])),_:1})]),_:1},8,["model","rules"])]),_:1},8,["model-value"])}}},z={__name:"CasesCategoryEdit",props:["isShowDialog","formData"],emits:["editCasesCategory","closeBox"],setup(r,{emit:d}){const m=d;console.log(r.formData);const i=x(),f=D({title:[{required:!0,message:"请输入标题",trigger:"blur"}],image:[{required:!0,message:"请上传图片",trigger:"blur"}]}),g=()=>{i.value.validate().then(p=>{p&&b().putCasesCategory(r.formData).then(t=>{m("editCasesCategory",{_id:r.formData._id,title:r.formData.title}),m("closeBox"),i.value&&i.value.resetFields()})}).catch(p=>{console.log(p)})};return(p,t)=>{const a=s("el-input"),n=s("el-form-item"),e=s("el-button"),u=s("el-form"),y=s("el-dialog");return k(),B(y,{"model-value":r.isShowDialog,onSubmit:t[2]||(t[2]=$(()=>{},["prevent"])),title:"编辑应用案例类别",width:"500",onClose:t[3]||(t[3]=v=>m("closeBox"))},{default:l(()=>[o(u,{model:r.formData,ref_key:"formRed",ref:i,"label-width":"auto",rules:f,style:{"max-width":"600px"}},{default:l(()=>[o(n,{label:"标题",prop:"title"},{default:l(()=>[o(a,{style:{width:"280px"},modelValue:r.formData.title,"onUpdate:modelValue":t[0]||(t[0]=v=>r.formData.title=v)},null,8,["modelValue"])]),_:1}),o(e,{type:"primary",onClick:t[1]||(t[1]=v=>g())},{default:l(()=>t[4]||(t[4]=[_(" 确认编辑 ")])),_:1})]),_:1},8,["model","rules"])]),_:1},8,["model-value"])}}},A={class:"card-header",style:{display:"flex","justify-content":"space-between"}},F={style:{"text-align":"center",margin:"0"}},N={__name:"CasesCategoryList",setup(r){const d=x([]),m=n=>{d.value.push(n)},i=x(!1),f=(n,e)=>{b().deleteCasesCategory(e._id).then(u=>{d.value.splice(n,1)})},g=x(0),p=(n,e)=>{g.value=n,t.value=!0},t=x(!1),a=n=>{d.value.splice(g.value,1,n)};return E(()=>{b().getCasesCategoryList().then(n=>{d.value=n})}),(n,e)=>{const u=s("el-button"),y=s("el-table-column"),v=s("el-popover"),w=s("el-table"),S=s("el-card");return k(),R("div",null,[o(S,null,{header:l(()=>[c("div",A,[e[4]||(e[4]=c("span",null,"应用案例类别",-1)),o(u,{onClick:e[0]||(e[0]=C=>i.value=!0)},{default:l(()=>e[3]||(e[3]=[_("添加应用案例类别")])),_:1})])]),default:l(()=>[o(w,{data:d.value,style:{width:"100%"}},{default:l(()=>[o(y,{prop:"title",label:"标题",width:"180"}),o(y,{fixed:"right",width:"180",label:"选项"},{default:l(C=>[o(u,{size:"small",onClick:V=>p(C.$index,C.row)},{default:l(()=>e[5]||(e[5]=[_(" 编辑 ")])),_:2},1032,["onClick"]),o(v,{trigger:"click",placement:"top",width:160},{reference:l(()=>[o(u,{size:"small",type:"danger"},{default:l(()=>e[8]||(e[8]=[_(" 删除 ")])),_:1})]),default:l(()=>[e[9]||(e[9]=c("p",{style:{"margin-bottom":"20px"}},"你确定要删除吗?",-1)),c("div",F,[o(u,{size:"small"},{default:l(()=>e[6]||(e[6]=[_("取消")])),_:1}),o(u,{size:"small",type:"primary",onClick:V=>f(C.$index,C.row)},{default:l(()=>e[7]||(e[7]=[_(" 确定 ")])),_:2},1032,["onClick"])])]),_:2},1024)]),_:1})]),_:1},8,["data"])]),_:1}),o(h,{onAddCasesCategory:m,onCloseBox:e[1]||(e[1]=C=>i.value=!1),isShowDialog:i.value},null,8,["isShowDialog"]),o(z,{onEditCasesCategory:a,onCloseBox:e[2]||(e[2]=C=>t.value=!1),isShowDialog:t.value,formData:d.value[g.value]},null,8,["isShowDialog","formData"])])}}};export{N as default};
