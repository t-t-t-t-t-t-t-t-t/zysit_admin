import{u as b}from"./ProductCategoryHooks-BKJprlKG.js";import{r as x,e as D,f as a,o as P,g as k,w as l,a as o,h as c,i as B,j as V,c as E,k as w}from"./index-DDjioiAb.js";const R={__name:"ProductCategoryAdd",props:["isShowDialog"],emits:["addProductCategory","closeBox"],setup(d,{emit:s}){const m=s,i=x(),f=D({title:""}),g=D({title:[{required:!0,message:"请输入标题",trigger:"blur"}]}),p=()=>{i.value.validate().then(t=>{t&&b().addProductCategory(f).then(n=>{m("addProductCategory",{_id:n._id,title:n.title}),m("closeBox"),i.value&&i.value.resetFields()})}).catch(t=>{console.log(t)})};return(t,n)=>{const r=a("el-input"),e=a("el-form-item"),u=a("el-button"),y=a("el-form"),v=a("el-dialog");return P(),k(v,{"model-value":d.isShowDialog,onSubmit:n[2]||(n[2]=B(()=>{},["prevent"])),title:"添加产品类别",width:"500",onClose:n[3]||(n[3]=C=>m("closeBox"))},{default:l(()=>[o(y,{model:f,ref_key:"formRed",ref:i,"label-width":"auto",rules:g,style:{"max-width":"600px"}},{default:l(()=>[o(e,{label:"标题",prop:"title"},{default:l(()=>[o(r,{style:{width:"280px"},modelValue:f.title,"onUpdate:modelValue":n[0]||(n[0]=C=>f.title=C)},null,8,["modelValue"])]),_:1}),o(u,{type:"primary",onClick:n[1]||(n[1]=C=>p())},{default:l(()=>n[4]||(n[4]=[c(" 确认添加 ")])),_:1})]),_:1},8,["model","rules"])]),_:1},8,["model-value"])}}},h={__name:"ProductCategoryEdit",props:["isShowDialog","formData"],emits:["editProductCategory","closeBox"],setup(d,{emit:s}){const m=s,i=x(),f=D({title:[{required:!0,message:"请输入标题",trigger:"blur"}],image:[{required:!0,message:"请上传图片",trigger:"blur"}]}),g=()=>{i.value.validate().then(p=>{p&&b().putProductCategory(d.formData).then(t=>{m("editProductCategory",{_id:d.formData._id,title:d.formData.title}),m("closeBox"),i.value&&i.value.resetFields()})}).catch(p=>{console.log(p)})};return(p,t)=>{const n=a("el-input"),r=a("el-form-item"),e=a("el-button"),u=a("el-form"),y=a("el-dialog");return P(),k(y,{"model-value":d.isShowDialog,onSubmit:t[2]||(t[2]=B(()=>{},["prevent"])),title:"编辑产品类别",width:"500",onClose:t[3]||(t[3]=v=>m("closeBox"))},{default:l(()=>[o(u,{model:d.formData,ref_key:"formRed",ref:i,"label-width":"auto",rules:f,style:{"max-width":"600px"}},{default:l(()=>[o(r,{label:"标题",prop:"title"},{default:l(()=>[o(n,{style:{width:"280px"},modelValue:d.formData.title,"onUpdate:modelValue":t[0]||(t[0]=v=>d.formData.title=v)},null,8,["modelValue"])]),_:1}),o(e,{type:"primary",onClick:t[1]||(t[1]=v=>g())},{default:l(()=>t[4]||(t[4]=[c(" 确认编辑 ")])),_:1})]),_:1},8,["model","rules"])]),_:1},8,["model-value"])}}},z={class:"card-header",style:{display:"flex","justify-content":"space-between"}},A={style:{"text-align":"center",margin:"0"}},H={__name:"ProductCategory",setup(d){const s=x([]),m=r=>{s.value.push(r)},i=x(!1),f=(r,e)=>{b().deleteProductCategory(e._id).then(u=>{s.value.splice(r,1)})},g=x(0),p=(r,e)=>{g.value=r,t.value=!0},t=x(!1),n=r=>{s.value.splice(g.value,1,r)};return V(()=>{b().getProductCategoryList().then(r=>{s.value=r})}),(r,e)=>{const u=a("el-button"),y=a("el-table-column"),v=a("el-popover"),C=a("el-table"),$=a("el-card");return P(),E("div",null,[o($,null,{header:l(()=>[w("div",z,[e[4]||(e[4]=w("span",null,"产品类别",-1)),o(u,{onClick:e[0]||(e[0]=_=>i.value=!0)},{default:l(()=>e[3]||(e[3]=[c("添加产品类别")])),_:1})])]),default:l(()=>[o(C,{data:s.value,style:{width:"100%"}},{default:l(()=>[o(y,{prop:"title",label:"标题",width:"180"}),o(y,{fixed:"right",width:"180",label:"选项"},{default:l(_=>[o(u,{size:"small",onClick:S=>p(_.$index,_.row)},{default:l(()=>e[5]||(e[5]=[c(" 编辑 ")])),_:2},1032,["onClick"]),o(v,{trigger:"click",placement:"top",width:160},{reference:l(()=>[o(u,{size:"small",type:"danger"},{default:l(()=>e[8]||(e[8]=[c(" 删除 ")])),_:1})]),default:l(()=>[e[9]||(e[9]=w("p",{style:{"margin-bottom":"20px"}},"你确定要删除吗?",-1)),w("div",A,[o(u,{size:"small"},{default:l(()=>e[6]||(e[6]=[c("取消")])),_:1}),o(u,{size:"small",type:"primary",onClick:S=>f(_.$index,_.row)},{default:l(()=>e[7]||(e[7]=[c(" 确定 ")])),_:2},1032,["onClick"])])]),_:2},1024)]),_:1})]),_:1},8,["data"])]),_:1}),o(R,{onAddProductCategory:m,onCloseBox:e[1]||(e[1]=_=>i.value=!1),isShowDialog:i.value},null,8,["isShowDialog"]),o(h,{onEditProductCategory:n,onCloseBox:e[2]||(e[2]=_=>t.value=!1),isShowDialog:t.value,formData:s.value[g.value]},null,8,["isShowDialog","formData"])])}}};export{H as default};
